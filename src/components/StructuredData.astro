---
import type { Image } from '@/libs/stores/init';
import type { Person } from '@/libs/stores/people';
import { Schema } from 'astro-seo-schema';

type Props = {
  ogp: Image;
  performers: Person[];
};

const { ogp, performers } = Astro.props;
---

<!-- WebSite構造化データ -->
<Schema
  item={{
    "@context": "https://schema.org",
    "@type": "WebSite",
    "name": "アニメ★ミツゾウ大作戦",
    "alternateName": ["ミツゾウ", "アニメ", "東京理科大学"],
    "url": `${import.meta.env.PUBLIC_SITE_URL}/`,
    description: '合同アニメ制作',
    inLanguage: 'ja',
    publisher: {
      '@type': 'Organization',
      name: 'KEMO IN THE DARK',
      url: import.meta.env.PUBLIC_X_URL,
    },
  }}
/>

<!-- Event構造化データ -->
<Schema
  item={{
    '@context': 'https://schema.org',
    '@type': 'Event',
    name: 'アニメミツゾウ大作戦',
    description:
      'アニメミツゾウ大作戦は、東京理科大学の学生が制作したアニメーションを上映するイベントです。',
    startDate: '2025-07-12T20:00:00+09:00',
    endDate: '2025-07-13T04:00:00+09:00',
    eventStatus: 'https://schema.org/EventScheduled',
    eventAttendanceMode: 'https://schema.org/OnlineEventAttendanceMode',
    location: {
      '@type': 'VirtualLocation',
      name: 'https://x.com/nelly_coss',
      description: 'https://x.com/nelly_coss',
      url: import.meta.env.PUBLIC_VRCHAT_GROUP_URL,
    },
    image: ogp.url,
    organizer: {
      '@type': 'Organization',
      name: 'https://x.com/nelly_coss',
      url: import.meta.env.PUBLIC_X_URL,
    },
    offers: {
      '@type': 'Offer',
      price: '0',
      priceCurrency: 'JPY',
      validFrom: '2025-07-12T19:45:00+09:00',
      availability: 'https://schema.org/InStock',
      url: import.meta.env.PUBLIC_VRCHAT_GROUP_URL,
      description: 'https://x.com/nelly_coss、https://x.com/nelly_coss',
    },
    performer: performers.map((performer) => ({
      '@type': 'Person',
      name: performer.name,
      image: performer.avatar.url,
      url: performer.social_links.find((link) => link.type[0] === 'X')?.url ?? undefined,
    })),
    url: `${import.meta.env.PUBLIC_SITE_URL}/`,
    isAccessibleForFree: true,
    inLanguage: 'ja',
  }}
/>
